{"version":3,"sources":["src/jquery.i18n.messagestore.js"],"names":["$","MessageStore","messages","sources","jsonMessageLoader","url","deferred","Deferred","getJSON","done","resolve","fail","jqxhr","settings","exception","i18n","log","promise","prototype","load","source","locale","key","deferreds","messageStore","localization","set","Object","hasOwnProperty","call","push","when","apply","extend","get","messageKey","jQuery"],"mappings":"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","file":"jquery.i18n.messagestore.1b6aee07.map","sourceRoot":"..","sourcesContent":["/*!\n * jQuery Internationalization library - Message Store\n *\n * Copyright (C) 2012 Santhosh Thottingal\n *\n * jquery.i18n is dual licensed GPLv2 or later and MIT. You don't have to do anything special to\n * choose one license or the other and you don't have to notify anyone which license you are using.\n * You are free to use UniversalLanguageSelector in commercial projects as long as the copyright\n * header is left intact. See files GPL-LICENSE and MIT-LICENSE for details.\n *\n * @licence GNU General Public Licence 2.0 or later\n * @licence MIT License\n */\n\n( function ( $ ) {\n\t'use strict';\n\n\tvar MessageStore = function () {\n\t\tthis.messages = {};\n\t\tthis.sources = {};\n\t};\n\n\tfunction jsonMessageLoader( url ) {\n\t\tvar deferred = $.Deferred();\n\n\t\t$.getJSON( url )\n\t\t\t.done( deferred.resolve )\n\t\t\t.fail( function ( jqxhr, settings, exception ) {\n\t\t\t\t$.i18n.log( 'Error in loading messages from ' + url + ' Exception: ' + exception );\n\t\t\t\t// Ignore 404 exception, because we are handling fallabacks explicitly\n\t\t\t\tdeferred.resolve();\n\t\t\t} );\n\n\t\treturn deferred.promise();\n\t}\n\n\t/**\n\t * See https://github.com/wikimedia/jquery.i18n/wiki/Specification#wiki-Message_File_Loading\n\t */\n\tMessageStore.prototype = {\n\n\t\t/**\n\t\t * General message loading API This can take a URL string for\n\t\t * the json formatted messages.\n\t\t * <code>load('path/to/all_localizations.json');</code>\n\t\t *\n\t\t * This can also load a localization file for a locale <code>\n\t\t * load( 'path/to/de-messages.json', 'de' );\n\t\t * </code>\n\t\t * A data object containing message key- message translation mappings\n\t\t * can also be passed Eg:\n\t\t * <code>\n\t\t * load( { 'hello' : 'Hello' }, optionalLocale );\n\t\t * </code> If the data argument is\n\t\t * null/undefined/false,\n\t\t * all cached messages for the i18n instance will get reset.\n\t\t *\n\t\t * @param {string|Object} source\n\t\t * @param {string} locale Language tag\n\t\t * @return {jQuery.Promise}\n\t\t */\n\t\tload: function ( source, locale ) {\n\t\t\tvar key = null,\n\t\t\t\tdeferred = null,\n\t\t\t\tdeferreds = [],\n\t\t\t\tmessageStore = this;\n\n\t\t\tif ( typeof source === 'string' ) {\n\t\t\t\t// This is a URL to the messages file.\n\t\t\t\t$.i18n.log( 'Loading messages from: ' + source );\n\t\t\t\tdeferred = jsonMessageLoader( source )\n\t\t\t\t\t.done( function ( localization ) {\n\t\t\t\t\t\tmessageStore.set( locale, localization );\n\t\t\t\t\t} );\n\n\t\t\t\treturn deferred.promise();\n\t\t\t}\n\n\t\t\tif ( locale ) {\n\t\t\t\t// source is an key-value pair of messages for given locale\n\t\t\t\tmessageStore.set( locale, source );\n\n\t\t\t\treturn $.Deferred().resolve();\n\t\t\t} else {\n\t\t\t\t// source is a key-value pair of locales and their source\n\t\t\t\tfor ( key in source ) {\n\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, key ) ) {\n\t\t\t\t\t\tlocale = key;\n\t\t\t\t\t\t// No {locale} given, assume data is a group of languages,\n\t\t\t\t\t\t// call this function again for each language.\n\t\t\t\t\t\tdeferreds.push( messageStore.load( source[ key ], locale ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn $.when.apply( $, deferreds );\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Set messages to the given locale.\n\t\t * If locale exists, add messages to the locale.\n\t\t *\n\t\t * @param {string} locale\n\t\t * @param {Object} messages\n\t\t */\n\t\tset: function ( locale, messages ) {\n\t\t\tif ( !this.messages[ locale ] ) {\n\t\t\t\tthis.messages[ locale ] = messages;\n\t\t\t} else {\n\t\t\t\tthis.messages[ locale ] = $.extend( this.messages[ locale ], messages );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {string} locale\n\t\t * @param {string} messageKey\n\t\t * @return {boolean}\n\t\t */\n\t\tget: function ( locale, messageKey ) {\n\t\t\treturn this.messages[ locale ] && this.messages[ locale ][ messageKey ];\n\t\t}\n\t};\n\n\t$.extend( $.i18n.messageStore, new MessageStore() );\n}( jQuery ) );\n"]}